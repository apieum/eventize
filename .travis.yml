language: python
python:
  - "2.7"
  - "3.2"
  - "3.3"
# command to install dependencies
install:
    - "pip install -r requirements.txt"
    - "pip install -r dev-requirements.txt"
    - if [[ $TRAVIS_PYTHON_VERSION == '2.7' ]]; then pip install coverage coveralls; fi
    - if [[ $TRAVIS_PYTHON_VERSION == '2.7' ]]; then pip install restructuredtext_lint Pygments; fi
    - if [[ $TRAVIS_PYTHON_VERSION == '2.7' ]]; then pip install Sphinx; fi
# command to run tests
script:
    - export COVERALLS_REPO_TOKEN=ZiObwxNsdry9BV1YO0C87DllFYncMzP3f
    - if [[ $TRAVIS_PYTHON_VERSION == '2.7' ]]; then nosetests --with-coverage --cover-package=eventize; fi
    - if [[ $TRAVIS_PYTHON_VERSION != '2.7' ]]; then nosetests; fi
    - if [[ $TRAVIS_PYTHON_VERSION == '2.7' ]]; then rst-lint README.rst; fi
    - if [[ $TRAVIS_PYTHON_VERSION == '2.7' ]]; then python setup.py build_sphinx -c eventize/doc/source -s eventize/doc/source --build-dir eventize/doc/build; fi

after_success:
    - coveralls
